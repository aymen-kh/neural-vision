<div style="
    min-height: 100vh;
    background: linear-gradient(180deg, #0a0e27 0%, #0f1419 100%);
    padding: 1.5rem;
  ">
  <!-- Header -->
  <div style="
      margin-bottom: 2rem;
      padding: 2rem;
      border-radius: 20px;
      background: linear-gradient(135deg, rgba(6, 182, 212, 0.1) 0%, rgba(59, 130, 246, 0.1) 100%);
      border: 1px solid rgba(6, 182, 212, 0.2);
    ">
    <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 0.75rem">
      <div style="
          font-size: 3rem;
          background: linear-gradient(135deg, #06b6d4, #3b82f6);
          padding: 0.5rem;
          border-radius: 16px;
          display: flex;
          align-items: center;
          justify-content: center;
          box-shadow: 0 8px 32px rgba(6, 182, 212, 0.3);
          color: white;
        ">
        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
          <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
          <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
        </svg>
      </div>
      <div>
        <h1 style="
            font-size: 3rem;
            font-weight: 800;
            background: linear-gradient(135deg, #06b6d4, #3b82f6, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.025em;
          ">
          Dataset Playground
        </h1>
        <p style="font-size: 1.25rem; color: #9ca3af; margin-top: 0.25rem">
          Explore and manage your training data
        </p>
      </div>
    </div>
  </div>

  <style>
    @media (min-width: 1024px) {
      .dataset-grid {
        grid-template-columns: 1fr 2fr;
      }
    }
  </style>

  <div class="dataset-grid" style="display: grid; grid-template-columns: 1fr; gap: 1.5rem">
    <!-- Controls Panel -->
    <div style="display: flex; flex-direction: column; gap: 1.5rem">
      <!-- Dataset Info -->
      <div style="
          background: linear-gradient(
            135deg,
            rgba(26, 31, 46, 0.95) 0%,
            rgba(15, 20, 35, 0.95) 100%
          );
          border-radius: 20px;
          padding: 1.5rem;
          border: 2px solid transparent;
          background-image: linear-gradient(
              135deg,
              rgba(26, 31, 46, 0.95) 0%,
              rgba(15, 20, 35, 0.95) 100%
            ),
            linear-gradient(135deg, #06b6d4, #3b82f6);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          backdrop-filter: blur(20px);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        ">
        <h2 style="
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #06b6d4, #3b82f6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
          ">
          <span style="font-size: 1.75rem">ğŸ“Š</span> Dataset Info
        </h2>

        @if (datasetStats(); as stats) {
        <div style="display: flex; flex-direction: column; gap: 1rem">
          <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.75rem;
              background: rgba(15, 20, 25, 0.8);
              border-radius: 12px;
            ">
            <span style="color: #9ca3af">Total Samples</span>
            <span style="font-size: 1.25rem; font-weight: 700; color: #06b6d4">{{
              stats.totalSamples | number
              }}</span>
          </div>
          <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.75rem;
              background: rgba(15, 20, 25, 0.8);
              border-radius: 12px;
            ">
            <span style="color: #9ca3af">Features</span>
            <span style="font-size: 1.25rem; font-weight: 700; color: #d946ef">{{
              stats.features
              }}</span>
          </div>
          <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.75rem;
              background: rgba(15, 20, 25, 0.8);
              border-radius: 12px;
            ">
            <span style="color: #9ca3af">Classes</span>
            <span style="font-size: 1.25rem; font-weight: 700; color: #10b981">{{
              stats.classes
              }}</span>
          </div>
          <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.75rem;
              background: rgba(15, 20, 25, 0.8);
              border-radius: 12px;
            ">
            <span style="color: #9ca3af">Type</span>
            <span style="font-size: 1.25rem; font-weight: 700; color: #3b82f6; text-transform: capitalize">{{
              stats.type || 'Classification'
              }}</span>
          </div>
          <div style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              padding: 0.75rem;
              background: rgba(15, 20, 25, 0.8);
              border-radius: 12px;
            ">
            <span style="color: #9ca3af">Input Shape</span>
            <span style="font-size: 1.25rem; font-weight: 700; color: #fb923c">{{
              stats.inputShape | json
              }}</span>
          </div>
        </div>

        <button (click)="clearDataset()" style="
            width: 100%;
            margin-top: 1.5rem;
            padding: 1rem 1.5rem;
            background: linear-gradient(
              135deg,
              rgba(239, 68, 68, 0.15) 0%,
              rgba(220, 38, 38, 0.15) 100%
            );
            color: #f87171;
            border: 2px solid rgba(239, 68, 68, 0.4);
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: 700;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
          "
          onmouseover="this.style.background='linear-gradient(135deg, rgba(239, 68, 68, 0.25) 0%, rgba(220, 38, 38, 0.25) 100%)'; this.style.transform='scale(1.02)'; this.style.boxShadow='0 8px 24px rgba(239, 68, 68, 0.3)'"
          onmouseout="this.style.background='linear-gradient(135deg, rgba(239, 68, 68, 0.15) 0%, rgba(220, 38, 38, 0.15) 100%)'; this.style.transform='scale(1)'; this.style.boxShadow='none'">
          <span style="font-size: 1.25rem">ğŸ—‘ï¸</span> Clear Dataset
        </button>
        } @else {
        <div style="text-align: center; padding: 2rem 0; color: #6b7280">
          <p>No dataset loaded</p>
        </div>
        }
      </div>

      <!-- Load Actions -->
      <div style="
          background: linear-gradient(
            135deg,
            rgba(26, 31, 46, 0.95) 0%,
            rgba(15, 20, 35, 0.95) 100%
          );
          border-radius: 20px;
          padding: 1.5rem;
          border: 2px solid transparent;
          background-image: linear-gradient(
              135deg,
              rgba(26, 31, 46, 0.95) 0%,
              rgba(15, 20, 35, 0.95) 100%
            ),
            linear-gradient(135deg, #d946ef, #8b5cf6);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          backdrop-filter: blur(20px);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        ">
        <h2 style="
            font-size: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #d946ef, #8b5cf6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
          ">
          <span style="font-size: 1.75rem">ğŸ“¥</span> Load Data
        </h2>

        <div style="display: flex; flex-direction: column; gap: 1.25rem">
          <button (click)="loadMNIST()" [disabled]="isLoading()" [style.opacity]="isLoading() ? '0.5' : '1'"
            [style.cursor]="isLoading() ? 'not-allowed' : 'pointer'" style="
              width: 100%;
              padding: 1.25rem 1.5rem;
              background: linear-gradient(135deg, #06b6d4 0%, #3b82f6 50%, #8b5cf6 100%);
              background-size: 200% 200%;
              color: white;
              border-radius: 16px;
              font-weight: 800;
              font-size: 1.125rem;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              display: flex;
              align-items: center;
              justify-content: center;
              gap: 0.75rem;
              border: none;
              box-shadow: 0 10px 40px rgba(6, 182, 212, 0.4);
              position: relative;
              overflow: hidden;
            "
            onmouseover="if(!this.disabled) { this.style.transform='translateY(-2px) scale(1.02)'; this.style.boxShadow='0 20px 50px rgba(6, 182, 212, 0.5)'; this.style.backgroundPosition='100% 50%'; }"
            onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 10px 40px rgba(6, 182, 212, 0.4)'; this.style.backgroundPosition='0% 50%'">
            <span style="font-size: 1.5rem; animation: bounce 2s infinite">ğŸ”¢</span>
            <span>Load MNIST Digits</span>
          </button>
          <style>
            @keyframes bounce {

              0%,
              100% {
                transform: translateY(0);
              }

              50% {
                transform: translateY(-4px);
              }
            }
          </style>

          <div style="position: relative">
            <div style="position: absolute; inset: 0; display: flex; align-items: center">
              <div style="width: 100%; border-top: 1px solid rgba(45, 53, 72, 0.6)"></div>
            </div>
            <div style="
                position: relative;
                display: flex;
                justify-content: center;
                font-size: 0.875rem;
              ">
              <span style="padding: 0 0.5rem; background: rgba(26, 31, 46, 0.8); color: #6b7280">Or upload custom</span>
            </div>
          </div>

          <!-- CSV Configuration -->
          <div style="
              padding: 1rem;
              background: rgba(15, 20, 25, 0.5);
              border-radius: 12px;
              border: 1px solid rgba(45, 53, 72, 0.6);
            ">
            <h3 style="font-size: 0.875rem; font-weight: 600; color: #06b6d4; margin-bottom: 0.75rem">
              CSV Configuration
            </h3>
            <div style="display: flex; flex-direction: column; gap: 0.75rem">
              <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer">
                <input type="checkbox" [(ngModel)]="csvHasHeader" (change)="updateConfig()"
                  style="width: 16px; height: 16px; cursor: pointer" />
                <span style="font-size: 0.875rem; color: #d1d5db">Has header row</span>
              </label>
              <div>
                <label style="display: block; font-size: 0.75rem; color: #9ca3af; margin-bottom: 0.25rem">Label Column
                  Index</label>
                <input type="number" [(ngModel)]="csvLabelColumn" (change)="updateConfig()" min="0" style="
                    width: 100%;
                    padding: 0.5rem;
                    background: rgba(15, 20, 25, 0.8);
                    border: 1px solid #2d3548;
                    border-radius: 6px;
                    color: white;
                    font-size: 0.875rem;
                  " />
              </div>
              <div>
                <label style="display: block; font-size: 0.75rem; color: #9ca3af; margin-bottom: 0.25rem">Test Split
                  (0-1)</label>
                <input type="number" [(ngModel)]="csvTestSplit" (change)="updateConfig()" min="0" max="1" step="0.1"
                  style="
                    width: 100%;
                    padding: 0.5rem;
                    background: rgba(15, 20, 25, 0.8);
                    border: 1px solid #2d3548;
                    border-radius: 6px;
                    color: white;
                    font-size: 0.875rem;
                  " />
              </div>
            </div>
          </div>

          <label style="display: block; width: 100%; cursor: pointer">
            <div style="
                width: 100%;
                padding: 3rem 1.5rem;
                border: 3px dashed rgba(139, 92, 246, 0.4);
                border-radius: 16px;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                gap: 1rem;
                background: linear-gradient(
                  135deg,
                  rgba(15, 20, 25, 0.5) 0%,
                  rgba(26, 31, 46, 0.5) 100%
                );
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
              "
              onmouseover="this.style.borderColor='rgba(139, 92, 246, 0.8)'; this.style.background='linear-gradient(135deg, rgba(139, 92, 246, 0.1) 0%, rgba(217, 70, 239, 0.1) 100%)'; this.style.transform='scale(1.02)'"
              onmouseout="this.style.borderColor='rgba(139, 92, 246, 0.4)'; this.style.background='linear-gradient(135deg, rgba(15, 20, 25, 0.5) 0%, rgba(26, 31, 46, 0.5) 100%)'; this.style.transform='scale(1)'">
              <span style="
                  font-size: 3rem;
                  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                  filter: drop-shadow(0 4px 8px rgba(139, 92, 246, 0.4));
                " onmouseover="this.style.transform='scale(1.2) rotate(5deg)'"
                onmouseout="this.style.transform='scale(1) rotate(0deg)'">ğŸ“</span>
              <div style="text-align: center">
                <div style="
                    font-size: 1.125rem;
                    font-weight: 700;
                    color: #d1d5db;
                    margin-bottom: 0.25rem;
                  " onmouseover="this.style.color='#8b5cf6'" onmouseout="this.style.color='#d1d5db'">
                  Drop CSV or JSON here
                </div>
                <div style="font-size: 0.875rem; color: #6b7280">or click to browse</div>
              </div>
            </div>
            <input type="file" style="display: none" accept=".csv,.json" (change)="onFileSelected($event)" />
          </label>
        </div>

        @if (isLoading()) {
        <div style="
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            color: #06b6d4;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
          ">
          <div style="animation: spin 1s linear infinite">â³</div>
          <span>{{ uploadProgress() || 'Loading...' }}</span>
        </div>
        } @if (error()) {
        <div style="
            margin-top: 1rem;
            padding: 0.75rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            color: #ef4444;
            font-size: 0.875rem;
          ">
          {{ error() }}
        </div>
        }
      </div>
    </div>

    <!-- Data Visualization -->
    <div>
      <div style="
          background: linear-gradient(
            135deg,
            rgba(26, 31, 46, 0.95) 0%,
            rgba(15, 20, 35, 0.95) 100%
          );
          border-radius: 20px;
          padding: 2rem;
          border: 2px solid transparent;
          background-image: linear-gradient(
              135deg,
              rgba(26, 31, 46, 0.95) 0%,
              rgba(15, 20, 35, 0.95) 100%
            ),
            linear-gradient(135deg, #10b981, #06b6d4);
          background-origin: border-box;
          background-clip: padding-box, border-box;
          backdrop-filter: blur(20px);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
          height: 100%;
          min-height: 600px;
        ">
        <div style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
          ">
          <h2 style="
              font-size: 1.75rem;
              font-weight: 800;
              background: linear-gradient(135deg, #10b981, #06b6d4);
              -webkit-background-clip: text;
              -webkit-text-fill-color: transparent;
              display: flex;
              align-items: center;
              gap: 0.75rem;
            ">
            <span style="font-size: 2rem">ğŸ‘€</span> Data Preview
          </h2>
          <button (click)="loadSamples()" [disabled]="!datasetStats() || isLoading()"
            [style.opacity]="!datasetStats() || isLoading() ? '0.5' : '1'"
            [style.cursor]="!datasetStats() || isLoading() ? 'not-allowed' : 'pointer'" style="
              padding: 0.75rem 1.25rem;
              background: linear-gradient(
                135deg,
                rgba(6, 182, 212, 0.15) 0%,
                rgba(16, 185, 129, 0.15) 100%
              );
              border: 2px solid rgba(6, 182, 212, 0.4);
              border-radius: 12px;
              font-size: 0.875rem;
              font-weight: 700;
              color: #06b6d4;
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            "
            onmouseover="if(!this.disabled) { this.style.color='white'; this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.3) 0%, rgba(16, 185, 129, 0.3) 100%)'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(6, 182, 212, 0.3)'; }"
            onmouseout="this.style.color='#06b6d4'; this.style.background='linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(16, 185, 129, 0.15) 100%)'; this.style.transform='scale(1)'; this.style.boxShadow='none'">
            ğŸ”„ Shuffle Samples
          </button>
        </div>

        @if (samples().length > 0) {
        <div style="display: grid; grid-template-columns: repeat(5, 1fr); gap: 1rem" class="sample-grid">
          @for (sample of samples(); track sample.id) {
          <div class="sample-item" style="
              position: relative;
              aspect-ratio: 1;
              background: #000;
              border-radius: 12px;
              border: 2px solid rgba(6, 182, 212, 0.3);
              transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              cursor: help;
              overflow: hidden;
              box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            "
            onmouseover="this.style.borderColor='#06b6d4'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 8px 24px rgba(6, 182, 212, 0.4)'; this.querySelector('.sample-tooltip').style.opacity='1'; this.querySelector('canvas').style.opacity='1'"
            onmouseout="this.style.borderColor='rgba(6, 182, 212, 0.3)'; this.style.transform='scale(1)'; this.style.boxShadow='0 4px 12px rgba(0, 0, 0, 0.3)'; this.querySelector('.sample-tooltip').style.opacity='0'; this.querySelector('canvas').style.opacity='0.85'">
            <canvas [appDigitRender]="sample.input" style="
                width: 100%;
                height: 100%;
                opacity: 0.85;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
              "></canvas>

            <!-- Label Tooltip -->
            <div class="sample-tooltip" style="
                position: absolute;
                top: -2.5rem;
                left: 50%;
                transform: translateX(-50%);
                padding: 0.5rem 0.75rem;
                background: linear-gradient(135deg, #06b6d4, #3b82f6);
                color: white;
                font-size: 0.875rem;
                font-weight: 700;
                border-radius: 8px;
                opacity: 0;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                pointer-events: none;
                white-space: nowrap;
                z-index: 10;
                box-shadow: 0 4px 12px rgba(6, 182, 212, 0.4);
              ">
              Label: {{ sample.label }}
            </div>

            <!-- Label Badge -->
            <div style="
                position: absolute;
                bottom: 0;
                right: 0;
                padding: 0.25rem 0.5rem;
                background: rgba(10, 14, 39, 0.8);
                font-size: 10px;
                color: #06b6d4;
                font-family: monospace;
                border-top: 1px solid rgba(45, 53, 72, 0.6);
                border-left: 1px solid rgba(45, 53, 72, 0.6);
                border-top-left-radius: 6px;
              ">
              {{ sample.label }}
            </div>
          </div>
          }
        </div>
        <style>
          @media (min-width: 640px) {
            .sample-grid {
              grid-template-columns: repeat(8, 1fr);
            }
          }

          @media (min-width: 768px) {
            .sample-grid {
              grid-template-columns: repeat(10, 1fr);
            }
          }
        </style>
        } @else {
        <div style="
            height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: #6b7280;
            border: 3px dashed rgba(139, 92, 246, 0.3);
            border-radius: 20px;
            background: linear-gradient(
              135deg,
              rgba(15, 20, 25, 0.4) 0%,
              rgba(26, 31, 46, 0.4) 100%
            );
            gap: 1rem;
          ">
          <div style="
              font-size: 5rem;
              margin-bottom: 1rem;
              opacity: 0.6;
              animation: float 3s ease-in-out infinite;
            ">
            ğŸ–¼ï¸
          </div>
          <p style="font-size: 1.5rem; font-weight: 700; color: #9ca3af">No samples to display</p>
          <p style="font-size: 1rem; color: #6b7280">Load a dataset to visualize samples</p>
          <div style="
              margin-top: 1rem;
              padding: 0.75rem 1.5rem;
              background: linear-gradient(
                135deg,
                rgba(139, 92, 246, 0.15) 0%,
                rgba(217, 70, 239, 0.15) 100%
              );
              border: 2px solid rgba(139, 92, 246, 0.3);
              border-radius: 12px;
              color: #a78bfa;
              font-weight: 600;
            ">
            â¬†ï¸ Upload a dataset or load MNIST
          </div>
        </div>
        <style>
          @keyframes float {

            0%,
            100% {
              transform: translateY(0px);
            }

            50% {
              transform: translateY(-10px);
            }
          }
        </style>
        }
      </div>
    </div>
  </div>
</div>